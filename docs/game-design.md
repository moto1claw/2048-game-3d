# 2048: 时空穿越 3D - 游戏策划案

## 1. 项目概述

### 1.1 项目背景

2048 是一款经典的数字合成益智游戏，原版由 Gabriele Cirulli 于 2014 年开发。本项目在经典 2048 玩法的基础上进行创新升级：

- **3D 视觉体验**：使用 Three.js 引擎实现纯 3D 渲染
- **关卡模式**：引入 4 个主题世界，每个世界有不同目标
- **技能系统**：通过合成特殊方块获得技能
- **社交功能**：用户注册、排行榜、游戏记录

### 1.2 项目目标

1. 提供沉浸式的 3D 游戏体验
2. 增加游戏深度和可玩性
3. 引入社交元素增加粘性
4. 展示 Three.js 在游戏开发中的应用

---

## 2. 游戏设计

### 2.1 核心玩法

**基础规则：**
- 4×4 网格游戏盘面
- 每次操作（上下左右），所有方块向指定方向移动
- 相同数字的方块碰撞时合并为该数字 × 2
- 每次移动后随机生成一个 2 或 4
- 目标：达到或超过目标数字

**胜利条件：** 在限定步数内达成目标数字

**失败条件：**
- 步数用尽且未达成目标
- 盘面已满且无可合并的方块

### 2.2 关卡系统

| 关卡 | 主题名称 | 目标数字 | 步数限制 | 主题色 | 解锁条件 |
|------|----------|----------|----------|--------|----------|
| 1 | 古墓遗迹 | 256 | 30 步 | #8b4513 | 默认解锁 |
| 2 | 深海漩涡 | 512 | 35 步 | #0066cc | 通关第1关 |
| 3 | 星际战场 | 1024 | 40 步 | #663399 | 通关第2关 |
| 4 | 赛博都市 | 2048 | 45 步 | #00ff64 | 通关第3关 |

### 2.3 技能系统

玩家在合并方块时，有概率生成特殊方块。收集 10 个同类型特殊方块可释放技能：

| 技能 | 触发条件 | 效果 | 视觉特效 |
|------|----------|------|----------|
| 💣 炸弹 | 合并 4 的倍数 | 随机炸毁 1 个方块 | 红色脉冲 + 爆炸动画 |
| ❄️ 冰冻 | 合并 8 的倍数 | 增加 5 步 | 蓝色冰晶效果 |
| ✨ 双倍 | 合并 16 的倍数 | 随机将 1 个方块 ×2 | 紫色闪光 |
| 🔮 魔法 | 合并 32 的倍数 | 清除整行或整列 | 绿色魔法阵 |
| ⚡ 力量 | 合并 64 的倍数 | 直接 +100 分 | 黄色电弧 |

### 2.4 评分系统

**单次得分：** 合并产生的数字即为得分

**星级评价：**
- ⭐⭐⭐ (3星)：剩余步数 > 50% 总步数
- ⭐⭐ (2星)：剩余步数 > 30% 总步数
- ⭐ (1星)：剩余步数 ≤ 30% 总步数

---

## 3. 技术架构

### 3.1 系统架构

```
┌─────────────────────────────────────────────────┐
│                   前端 (Client)                  │
├─────────────────────────────────────────────────┤
│  ┌─────────┐  ┌─────────┐  ┌─────────────────┐  │
│  │ Three.js │  │  UI层   │  │  游戏状态管理   │  │
│  │ 3D渲染   │  │ HTML/CSS│  │  JavaScript    │  │
│  └─────────┘  └─────────┘  └─────────────────┘  │
└─────────────────────────────────────────────────┘
                        │
                        │ HTTP/WebSocket
                        ▼
┌─────────────────────────────────────────────────┐
│                   后端 (Server)                  │
├─────────────────────────────────────────────────┤
│  ┌─────────┐  ┌─────────┐  ┌─────────────────┐  │
│  │ Express │  │  API    │  │  数据存储       │  │
│  │ Web服务器│  │ 路由    │  │  JSON文件       │  │
│  └─────────┘  └─────────┘  └─────────────────┘  │
└─────────────────────────────────────────────────┘
```

### 3.2 前端技术栈

- **渲染引擎**: Three.js (3D 场景渲染)
- **构建工具**: Vite (开发服务器 + 生产构建)
- **UI 框架**: 原生 HTML/CSS/JavaScript
- **音频**: 暂未实现 (可扩展)

### 3.3 后端技术栈

- **运行时**: Node.js
- **框架**: Express.js
- **数据存储**: JSON 文件 (可扩展为数据库)

### 3.4 API 设计

| 端点 | 方法 | 说明 |
|------|------|------|
| `/api/auth/register` | POST | 用户注册 |
| `/api/auth/login` | POST | 用户登录 |
| `/api/game/levels` | GET | 获取关卡列表 |
| `/api/game/end` | POST | 提交游戏成绩 |
| `/api/leaderboard` | GET | 获取排行榜 |

---

## 4. 视觉设计

### 4.1 整体风格

- **主色调**: 深色背景 + 霓虹高光
- **字体**: Orbitron (科技感) + Noto Sans SC (中文)
- **风格**: 赛博朋克 × 复古未来主义

### 4.2 3D 场景设计

- **相机**: 俯视 45° 角，轻微自动摆动
- **灯光**: 环境光 + 方向光 + 2 个点光源 (青色/品红)
- **背景**: 粒子星空效果

### 4.3 方块设计

- **形状**: 圆角立方体
- **材质**: 半金属质感，带自发光
- **颜色**: 根据数值渐变 (2→2048 对应不同颜色)
- **标签**: Canvas 绘制的数字纹理，贴在方块 4 面

### 4.4 动画效果

| 动画类型 | 持续时间 | 缓动函数 |
|----------|----------|----------|
| 方块移动 | 150ms | ease-out |
| 方块出现 | 300ms | ease-out-back |
| 方块合并 | 200ms | ease-in-out |
| 方块消除 | 300ms | linear |
| 相机微动 | 持续 | sine wave |

---

## 5. 用户界面

### 5.1 布局

```
┌────────────────────────────────────────┐
│  2048: 时空穿越 3D    [第 1 关: 古墓遗迹] │
├────────────────────────────────────────┤
│                                        │
│    ┌────┬────┬────┬────┐              │
│    │    │  2 │    │    │              │
│    ├────┼────┼────┼────┤              │
│    │  4 │  4 │  2 │    │   ← 3D 游戏区
│    ├────┼────┼────┼────┤              │
│    │  8 │    │    │    │              │
│    └────┴────┴────┴────┘              │
│                                        │
├────────────────────────────────────────┤
│  分数: 128  |  目标: 256  |  步数: 25   │
│  [████████░░] 技能条                     │
├────────────────────────────────────────┤
│  [使用技能] [下一关] [重置]               │
└────────────────────────────────────────┘
```

### 5.2 交互设计

- **键盘**: 方向键 / WASD
- **触屏**: 滑动操作
- **按钮**: 点击触发

---

## 6. 运营设计

### 6.1 用户系统

- **注册**: 用户名 + 密码
- **登录**: 用户名 + 密码
- **匿名**: 未登录可游玩，但不保存记录

### 6.2 排行榜

- **展示**: 按关卡分榜，显示前 10 名
- **数据**: 用户名、关卡、分数、日期
- **更新**: 每次游戏结束后实时更新

### 6.3 成就系统 (未来扩展)

- 初学者：完成第 1 关
- 高手：3 星通关任意关卡
- 大师：3 星通关所有关卡
- 收藏家：使用 10 次技能

---

## 7. 开发计划

### 7.1 已完成 (v1.0)

- [x] 3D 场景渲染
- [x] 基础游戏逻辑
- [x] 4 个关卡
- [x] 简化版技能系统
- [x] 用户注册/登录
- [x] 排行榜

### 7.2 待开发 (v1.1+)

- [ ] 完整技能系统 (6 种技能)
- [ ] 音效和背景音乐
- [ ] 成就系统
- [ ] 社交分享 (截屏分享)
- [ ] 移动端原生适配
- [ ] 多人对战模式
- [ ] 数据库升级 (MySQL/PostgreSQL)

---

## 8. 附录

### 8.1 色彩规范

```
主题色:
- 古墓遗迹: #8b4513 (棕色)
- 深海漩涡: #0066cc (深蓝)
- 星际战场: #663399 (紫色)
- 赛博都市: #00ff64 (亮绿)

方块色:
- 2: #eee4da
- 4: #ede0c8
- 8: #f2b179
- 16: #f59563
- 32: #f67c5f
- 64: #f65e3b
- 128: #edcf72
- 256: #edcc61
- 512: #edc850
- 1024: #edc53f
- 2048: #edc22e
```

### 8.2 性能优化

- 方块复用池
- 纹理缓存
- 渲染节流
- 移动端降级策略

---

**文档版本**: v1.0  
**最后更新**: 2026-02-24  
**作者**: 苏晴 (OpenClaw AI) 🦞
